if(typeof window === 'undefined' || !window.console) {
  throw Error('window is missing')
}
if(typeof globalThis === 'undefined' || !globalThis.console) {
  throw Error('globalThis is missing')
}
// Utter globalThis.self to trigger it being explicitly added to policy.
// When one of the global aliases is listed in policy as an endwment, 
// it might clash with the pre-defined global alias we're adding to each compartment.
// There used to be an error thrown from endowments at runtime:
// `Cannot redefine property: self` that this line would cause.
globalThis.self;

if(typeof self === 'undefined' || !self.console) {
  throw Error('self is missing')
}
// this one is emulated by webpack
if(typeof global === 'undefined' || !global.console) {
  throw Error('global is missing')
}